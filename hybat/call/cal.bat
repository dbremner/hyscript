:: @Author: hu
:: @Date: 2006.12
:: @Description:
::    Call CONP.exe and Tecplot

@ECHO OFF
CLS
@SET path=C:\Program Files\TEC100\Bin;%path%

:: -------------------------------------------------------------------------------------------------
::  删除残余文件
IF EXIST cp.conf DEL cp.conf
IF EXIST Result*.plt DEL Result*.plt
IF EXIST log DEL log
:: -------------------------------------------------------------------------------------------------


:: -------------------------------------------------------------------------------------------------
::
SET a=0

:start

SET /a a=a+1
DEL conp.inp

:: 初始压强 (atm)   初始温度 (K)
ECHO 24%a% 800>>conp.inp
:: 牛顿冷却时间(s)   环境温度(K)
ECHO 1  300 >>conp.inp
:: 组分名称  组分摩尔数相对量
ECHO H2    2 >>conp.inp
ECHO O2    1 >>conp.inp
ECHO N2    0 >>conp.inp
ECHO END >>conp.inp
:: 计算总时间  计算时间步长
ECHO 1E0  1E-5 >>conp.inp

TYPE conp.inp
:: -------------------------------------------------------------------------------------------------

:: -------------------------------------------------------------------------------------------------
::  保存设置和输出
ECHO -------------------------------------------------------------->>cp.conf
ECHO -------------------------------------------------------------->>cp.conf
ECHO 参数设置%a% >>cp.conf
ECHO -------------------------------------------------------------->>cp.conf
type conp.inp>>cp.conf
ECHO -------------------------------------------------------------->>cp.conf

:: pause
ECHO -------------------------------------------------------------->>log
ECHO -------------------------------------------------------------->>log
ECHO 参数设置%a% >>log
ECHO -------------------------------------------------------------->>log
:: -------------------------------------------------------------------------------------------------


:: -------------------------------------------------------------------------------------------------
::  计算各物理量
ECHO+|CONP.exe >>log & BREAK


:NEXT

:: -------------------------------------------------------------------------------------------------
::  修改数据文件便于画图
delheader.exe

COPY Result1.txt Result%a%.plt
:: -------------------------------------------------------------------------------------------------


IF %a%==9 GOTO end
GOTO start

:end
::pause

::绘制图形
::start tecplot Result1.plt Result2.plt Result3.plt Result4.plt Result5.plt Result6.plt Result7.plt Result8.plt  Result9.plt
start ab.lay
